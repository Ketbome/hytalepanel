# HytalePanel - Multi-Server Management
# Servers are created dynamically from the Dashboard
#
# To access server data directly from host, set HOST_DATA_PATH:
#   HOST_DATA_PATH=/path/to/data docker compose up -d
# This makes servers use bind mounts instead of Docker volumes.
#
# For SSO: set DISABLE_AUTH=true if using reverse proxy auth (Authentik, etc.)
# The panel also accepts Basic Auth headers from your proxy.
#
# For custom URL path: set BASE_PATH=/panel to access at domain.com/panel/
services:
  panel:
    image: ketbom/hytale-panel:latest
    container_name: hytale-panel
    restart: unless-stopped
    ports:
      - "${PANEL_PORT:-3000}:${PANEL_PORT:-3000}"
    environment:
      TZ: ${TZ:-UTC}
      PANEL_PORT: ${PANEL_PORT:-3000}
      PANEL_USER: ${PANEL_USER:-admin}
      PANEL_PASS: ${PANEL_PASS:-admin}
      JWT_SECRET: ${JWT_SECRET:-}
      MODTALE_API_KEY: ${MODTALE_API_KEY:-}
      CURSEFORGE_API_KEY: ${CURSEFORGE_API_KEY:-}
      DATA_PATH: /opt/hytale-panel/data
      HOST_DATA_PATH: ${HOST_DATA_PATH:-}
      DISABLE_AUTH: ${DISABLE_AUTH:-false}
      BASE_PATH: ${BASE_PATH:-}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${HOST_DATA_PATH:-hytale-panel-data}:/opt/hytale-panel/data
      - /etc/machine-id:/etc/machine-id:ro
      - /sys/class/dmi/id:/sys/class/dmi/id:ro

volumes:
  hytale-panel-data:
